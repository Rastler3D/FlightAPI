2025-07-29 00:19:11.992 +04:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-07-29 00:19:13.909 +04:00 [INF] Executed DbCommand (108ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 00:19:13.950 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 00:19:14.074 +04:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-07-29 00:19:14.089 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 00:19:14.101 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-29 00:19:14.121 +04:00 [INF] No migrations were applied. The database is already up to date.
2025-07-29 00:19:14.513 +04:00 [ERR] Failed executing DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r
    WHERE r."Code" = 'User')
2025-07-29 00:19:14.557 +04:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Infrastructure.Data.ApplicationDbContext'.
Npgsql.PostgresException (0x80004005): 42P01: relation "Roles" does not exist

POSITION: 41
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: relation "Roles" does not exist
    Position: 41
    File: parse_relation.c
    Line: 1449
    Routine: parserOpenTable
Npgsql.PostgresException (0x80004005): 42P01: relation "Roles" does not exist

POSITION: 41
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: relation "Roles" does not exist
    Position: 41
    File: parse_relation.c
    Line: 1449
    Routine: parserOpenTable
2025-07-29 00:19:14.771 +04:00 [ERR] An error occurred while seeding the database
Npgsql.PostgresException (0x80004005): 42P01: relation "Roles" does not exist

POSITION: 41
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Infrastructure.Data.ApplicationDbContextInitializer.SeedRolesAsync() in C:\Users\aleks\source\repos\Flight\Infrastructure\Data\ApplicationDbContextInitializer.cs:line 80
   at Infrastructure.Data.ApplicationDbContextInitializer.TrySeedAsync() in C:\Users\aleks\source\repos\Flight\Infrastructure\Data\ApplicationDbContextInitializer.cs:line 67
   at Infrastructure.Data.ApplicationDbContextInitializer.SeedAsync() in C:\Users\aleks\source\repos\Flight\Infrastructure\Data\ApplicationDbContextInitializer.cs:line 56
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: relation "Roles" does not exist
    Position: 41
    File: parse_relation.c
    Line: 1449
    Routine: parserOpenTable
2025-07-29 00:33:44.149 +04:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-07-29 00:34:53.187 +04:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-07-29 00:34:54.868 +04:00 [INF] Executed DbCommand (112ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 00:34:54.915 +04:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-29 00:34:54.946 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 00:34:54.964 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 00:34:54.969 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-29 00:34:54.993 +04:00 [INF] Applying migration '20250728203346_Initial Migration'.
2025-07-29 00:34:55.117 +04:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Flights" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Origin" character varying(256) NOT NULL,
    "Destination" character varying(256) NOT NULL,
    "Departure" timestamp with time zone NOT NULL,
    "Arrival" timestamp with time zone NOT NULL,
    "Status" integer NOT NULL,
    CONSTRAINT "PK_Flights" PRIMARY KEY ("Id")
);
2025-07-29 00:34:55.123 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Roles" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Code" character varying(256) NOT NULL,
    CONSTRAINT "PK_Roles" PRIMARY KEY ("Id")
);
2025-07-29 00:34:55.131 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Users" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Username" character varying(256) NOT NULL,
    "PasswordHash" character varying(256) NOT NULL,
    "RoleId" integer NOT NULL,
    CONSTRAINT "PK_Users" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Users_Roles_RoleId" FOREIGN KEY ("RoleId") REFERENCES "Roles" ("Id") ON DELETE RESTRICT
);
2025-07-29 00:34:55.137 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Roles" ("Id", "Code")
VALUES (1, 'User');
INSERT INTO "Roles" ("Id", "Code")
VALUES (2, 'Moderator');
2025-07-29 00:34:55.141 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Roles_Code" ON "Roles" ("Code");
2025-07-29 00:34:55.146 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Users_RoleId" ON "Users" ("RoleId");
2025-07-29 00:34:55.150 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Users_Username" ON "Users" ("Username");
2025-07-29 00:34:55.162 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT setval(
    pg_get_serial_sequence('"Roles"', 'Id'),
    GREATEST(
        (SELECT MAX("Id") FROM "Roles") + 1,
        nextval(pg_get_serial_sequence('"Roles"', 'Id'))),
    false);
2025-07-29 00:34:55.166 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250728203346_Initial Migration', '8.0.18');
2025-07-29 00:34:55.541 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r
    WHERE r."Code" = 'User')
2025-07-29 00:34:55.574 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r
    WHERE r."Code" = 'Moderator')
2025-07-29 00:34:55.624 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id"
FROM "Roles" AS r
WHERE r."Code" = 'User'
LIMIT 1
2025-07-29 00:34:55.636 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id"
FROM "Roles" AS r
WHERE r."Code" = 'Moderator'
LIMIT 1
2025-07-29 00:34:56.289 +04:00 [INF] Executed DbCommand (19ms) [Parameters=[@__regularUser_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u
    WHERE u."Username" = @__regularUser_Username_0)
2025-07-29 00:34:56.369 +04:00 [INF] Seeded regular user: user
2025-07-29 00:34:56.373 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__moderatorUser_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u
    WHERE u."Username" = @__moderatorUser_Username_0)
2025-07-29 00:34:56.382 +04:00 [INF] Seeded moderator user: moderator
2025-07-29 00:34:56.386 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__adminUser_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u
    WHERE u."Username" = @__adminUser_Username_0)
2025-07-29 00:34:56.389 +04:00 [INF] Seeded admin user: admin
2025-07-29 00:34:56.473 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?', @p4='?' (DbType = Int32), @p5='?', @p6='?', @p7='?' (DbType = Int32), @p8='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("PasswordHash", "RoleId", "Username")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
INSERT INTO "Users" ("PasswordHash", "RoleId", "Username")
VALUES (@p3, @p4, @p5)
RETURNING "Id";
INSERT INTO "Users" ("PasswordHash", "RoleId", "Username")
VALUES (@p6, @p7, @p8)
RETURNING "Id";
2025-07-29 00:34:56.511 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Flights" AS f)
2025-07-29 00:34:56.552 +04:00 [ERR] Failed executing DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = DateTime), @p7='?', @p8='?', @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?', @p13='?', @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime), @p16='?' (DbType = DateTime), @p17='?', @p18='?', @p19='?' (DbType = Int32), @p20='?' (DbType = DateTime), @p21='?' (DbType = DateTime), @p22='?', @p23='?', @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime), @p26='?' (DbType = DateTime), @p27='?', @p28='?', @p29='?' (DbType = Int32), @p30='?' (DbType = DateTime), @p31='?' (DbType = DateTime), @p32='?', @p33='?', @p34='?' (DbType = Int32), @p35='?' (DbType = DateTime), @p36='?' (DbType = DateTime), @p37='?', @p38='?', @p39='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Flights" ("Arrival", "Departure", "Destination", "Origin", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
INSERT INTO "Flights" ("Arrival", "Departure", "Destination", "Origin", "Status")
VALUES (@p5, @p6, @p7, @p8, @p9)
RETURNING "Id";
INSERT INTO "Flights" ("Arrival", "Departure", "Destination", "Origin", "Status")
VALUES (@p10, @p11, @p12, @p13, @p14)
RETURNING "Id";
INSERT INTO "Flights" ("Arrival", "Departure", "Destination", "Origin", "Status")
VALUES (@p15, @p16, @p17, @p18, @p19)
RETURNING "Id";
INSERT INTO "Flights" ("Arrival", "Departure", "Destination", "Origin", "Status")
VALUES (@p20, @p21, @p22, @p23, @p24)
RETURNING "Id";
INSERT INTO "Flights" ("Arrival", "Departure", "Destination", "Origin", "Status")
VALUES (@p25, @p26, @p27, @p28, @p29)
RETURNING "Id";
INSERT INTO "Flights" ("Arrival", "Departure", "Destination", "Origin", "Status")
VALUES (@p30, @p31, @p32, @p33, @p34)
RETURNING "Id";
INSERT INTO "Flights" ("Arrival", "Departure", "Destination", "Origin", "Status")
VALUES (@p35, @p36, @p37, @p38, @p39)
RETURNING "Id";
2025-07-29 00:34:56.584 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.ArgumentException: Cannot write DateTimeOffset with Offset=-08:00:00 to PostgreSQL type 'timestamp with time zone', only offset 0 (UTC) is supported.  (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeOffsetConverter.WriteCore(PgWriter writer, DateTimeOffset value)
   at Npgsql.Internal.PgBufferedConverter`1.Write(PgWriter writer, T value)
   at Npgsql.Internal.PgBufferedConverter`1.WriteAsObject(Boolean async, PgWriter writer, Object value, CancellationToken cancellationToken)
   at Npgsql.Internal.PgConverter.WriteAsObjectAsync(PgWriter writer, Object value, CancellationToken cancellationToken)
   at Npgsql.NpgsqlParameter.WriteValue(Boolean async, PgWriter writer, CancellationToken cancellationToken)
   at Npgsql.NpgsqlParameter.Write(Boolean async, PgWriter writer, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.WriteBind(List`1 parameters, String portal, Byte[] asciiName, Boolean allResultTypesAreUnknown, Boolean[] unknownResultTypeList, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.<Write>g__WriteExecute|101_0(NpgsqlConnector connector, Boolean async, Boolean flush, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.ArgumentException: Cannot write DateTimeOffset with Offset=-08:00:00 to PostgreSQL type 'timestamp with time zone', only offset 0 (UTC) is supported.  (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeOffsetConverter.WriteCore(PgWriter writer, DateTimeOffset value)
   at Npgsql.Internal.PgBufferedConverter`1.Write(PgWriter writer, T value)
   at Npgsql.Internal.PgBufferedConverter`1.WriteAsObject(Boolean async, PgWriter writer, Object value, CancellationToken cancellationToken)
   at Npgsql.Internal.PgConverter.WriteAsObjectAsync(PgWriter writer, Object value, CancellationToken cancellationToken)
   at Npgsql.NpgsqlParameter.WriteValue(Boolean async, PgWriter writer, CancellationToken cancellationToken)
   at Npgsql.NpgsqlParameter.Write(Boolean async, PgWriter writer, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.WriteBind(List`1 parameters, String portal, Byte[] asciiName, Boolean allResultTypesAreUnknown, Boolean[] unknownResultTypeList, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.<Write>g__WriteExecute|101_0(NpgsqlConnector connector, Boolean async, Boolean flush, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-07-29 00:34:56.829 +04:00 [ERR] An error occurred while seeding the database
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.ArgumentException: Cannot write DateTimeOffset with Offset=-08:00:00 to PostgreSQL type 'timestamp with time zone', only offset 0 (UTC) is supported.  (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeOffsetConverter.WriteCore(PgWriter writer, DateTimeOffset value)
   at Npgsql.Internal.PgBufferedConverter`1.Write(PgWriter writer, T value)
   at Npgsql.Internal.PgBufferedConverter`1.WriteAsObject(Boolean async, PgWriter writer, Object value, CancellationToken cancellationToken)
   at Npgsql.Internal.PgConverter.WriteAsObjectAsync(PgWriter writer, Object value, CancellationToken cancellationToken)
   at Npgsql.NpgsqlParameter.WriteValue(Boolean async, PgWriter writer, CancellationToken cancellationToken)
   at Npgsql.NpgsqlParameter.Write(Boolean async, PgWriter writer, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.WriteBind(List`1 parameters, String portal, Byte[] asciiName, Boolean allResultTypesAreUnknown, Boolean[] unknownResultTypeList, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.<Write>g__WriteExecute|101_0(NpgsqlConnector connector, Boolean async, Boolean flush, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Infrastructure.Data.ApplicationDbContextInitializer.SeedFlightsAsync() in C:\Users\aleks\source\repos\Flight\Infrastructure\Data\ApplicationDbContextInitializer.cs:line 207
   at Infrastructure.Data.ApplicationDbContextInitializer.TrySeedAsync() in C:\Users\aleks\source\repos\Flight\Infrastructure\Data\ApplicationDbContextInitializer.cs:line 71
   at Infrastructure.Data.ApplicationDbContextInitializer.SeedAsync() in C:\Users\aleks\source\repos\Flight\Infrastructure\Data\ApplicationDbContextInitializer.cs:line 56
2025-07-29 00:39:37.519 +04:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-07-29 00:39:39.308 +04:00 [INF] Executed DbCommand (117ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 00:39:39.360 +04:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-29 00:39:39.401 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 00:39:39.422 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 00:39:39.426 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-29 00:39:39.447 +04:00 [INF] No migrations were applied. The database is already up to date.
2025-07-29 00:39:39.997 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r
    WHERE r."Code" = 'User')
2025-07-29 00:39:40.041 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r
    WHERE r."Code" = 'Moderator')
2025-07-29 00:39:40.117 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id"
FROM "Roles" AS r
WHERE r."Code" = 'User'
LIMIT 1
2025-07-29 00:39:40.130 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id"
FROM "Roles" AS r
WHERE r."Code" = 'Moderator'
LIMIT 1
2025-07-29 00:39:40.875 +04:00 [INF] Executed DbCommand (26ms) [Parameters=[@__regularUser_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u
    WHERE u."Username" = @__regularUser_Username_0)
2025-07-29 00:39:40.883 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__moderatorUser_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u
    WHERE u."Username" = @__moderatorUser_Username_0)
2025-07-29 00:39:40.891 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__adminUser_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u
    WHERE u."Username" = @__adminUser_Username_0)
2025-07-29 00:39:40.901 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Flights" AS f)
2025-07-29 00:39:41.166 +04:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = DateTime), @p7='?', @p8='?', @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?', @p13='?', @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime), @p16='?' (DbType = DateTime), @p17='?', @p18='?', @p19='?' (DbType = Int32), @p20='?' (DbType = DateTime), @p21='?' (DbType = DateTime), @p22='?', @p23='?', @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime), @p26='?' (DbType = DateTime), @p27='?', @p28='?', @p29='?' (DbType = Int32), @p30='?' (DbType = DateTime), @p31='?' (DbType = DateTime), @p32='?', @p33='?', @p34='?' (DbType = Int32), @p35='?' (DbType = DateTime), @p36='?' (DbType = DateTime), @p37='?', @p38='?', @p39='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Flights" ("Arrival", "Departure", "Destination", "Origin", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
INSERT INTO "Flights" ("Arrival", "Departure", "Destination", "Origin", "Status")
VALUES (@p5, @p6, @p7, @p8, @p9)
RETURNING "Id";
INSERT INTO "Flights" ("Arrival", "Departure", "Destination", "Origin", "Status")
VALUES (@p10, @p11, @p12, @p13, @p14)
RETURNING "Id";
INSERT INTO "Flights" ("Arrival", "Departure", "Destination", "Origin", "Status")
VALUES (@p15, @p16, @p17, @p18, @p19)
RETURNING "Id";
INSERT INTO "Flights" ("Arrival", "Departure", "Destination", "Origin", "Status")
VALUES (@p20, @p21, @p22, @p23, @p24)
RETURNING "Id";
INSERT INTO "Flights" ("Arrival", "Departure", "Destination", "Origin", "Status")
VALUES (@p25, @p26, @p27, @p28, @p29)
RETURNING "Id";
INSERT INTO "Flights" ("Arrival", "Departure", "Destination", "Origin", "Status")
VALUES (@p30, @p31, @p32, @p33, @p34)
RETURNING "Id";
INSERT INTO "Flights" ("Arrival", "Departure", "Destination", "Origin", "Status")
VALUES (@p35, @p36, @p37, @p38, @p39)
RETURNING "Id";
2025-07-29 00:39:41.233 +04:00 [INF] Seeded 8 sample flights
2025-07-29 00:39:41.287 +04:00 [INF] User profile is available. Using 'C:\Users\aleks\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-29 00:39:41.642 +04:00 [INF] Now listening on: http://localhost:56258
2025-07-29 00:39:41.643 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-29 00:39:41.644 +04:00 [INF] Hosting environment: Development
2025-07-29 00:39:41.645 +04:00 [INF] Content root path: C:\Users\aleks\source\repos\Flight\Api
2025-07-29 00:39:43.941 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:40:39.402 +04:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-07-29 00:40:41.054 +04:00 [INF] Executed DbCommand (145ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 00:40:41.106 +04:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-29 00:40:41.150 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 00:40:41.174 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 00:40:41.179 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-29 00:40:41.200 +04:00 [INF] No migrations were applied. The database is already up to date.
2025-07-29 00:40:41.655 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r
    WHERE r."Code" = 'User')
2025-07-29 00:40:41.695 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r
    WHERE r."Code" = 'Moderator')
2025-07-29 00:40:41.767 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id"
FROM "Roles" AS r
WHERE r."Code" = 'User'
LIMIT 1
2025-07-29 00:40:41.784 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id"
FROM "Roles" AS r
WHERE r."Code" = 'Moderator'
LIMIT 1
2025-07-29 00:40:42.382 +04:00 [INF] Executed DbCommand (17ms) [Parameters=[@__regularUser_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u
    WHERE u."Username" = @__regularUser_Username_0)
2025-07-29 00:40:42.389 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__moderatorUser_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u
    WHERE u."Username" = @__moderatorUser_Username_0)
2025-07-29 00:40:42.395 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__adminUser_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u
    WHERE u."Username" = @__adminUser_Username_0)
2025-07-29 00:40:42.403 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Flights" AS f)
2025-07-29 00:40:42.445 +04:00 [INF] User profile is available. Using 'C:\Users\aleks\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-29 00:40:42.784 +04:00 [INF] Now listening on: http://localhost:56566
2025-07-29 00:40:42.786 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-29 00:40:42.787 +04:00 [INF] Hosting environment: Development
2025-07-29 00:40:42.788 +04:00 [INF] Content root path: C:\Users\aleks\source\repos\Flight\Api
2025-07-29 00:40:43.274 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:40:43.336 +04:00 [WRN] Failed to determine the https port for redirect.
2025-07-29 00:40:44.388 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:40:44.687 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:40:44.694 +04:00 [INF] HTTP GET /health responded 200 in 1353.2416 ms
2025-07-29 00:40:44.703 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 1448.2492ms
2025-07-29 00:40:45.705 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:40:45.718 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:40:45.766 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:40:45.769 +04:00 [INF] HTTP GET /health responded 200 in 51.5688 ms
2025-07-29 00:40:45.773 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 68.5695ms
2025-07-29 00:41:15.779 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:41:15.782 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:41:15.798 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:41:15.799 +04:00 [INF] HTTP GET /health responded 200 in 18.0128 ms
2025-07-29 00:41:15.801 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 22.0501ms
2025-07-29 00:41:17.720 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/ - null null
2025-07-29 00:41:17.723 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/ - 301 0 null 4.3797ms
2025-07-29 00:41:17.728 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/index.html - null null
2025-07-29 00:41:17.823 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/index.html - 200 null text/html;charset=utf-8 94.9799ms
2025-07-29 00:41:17.841 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/swagger-ui.css - null null
2025-07-29 00:41:17.843 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/swagger-ui-bundle.js - null null
2025-07-29 00:41:17.843 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/index.css - null null
2025-07-29 00:41:17.845 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/index.js - null null
2025-07-29 00:41:17.844 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/swagger-ui-standalone-preset.js - null null
2025-07-29 00:41:17.853 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/index.js - 200 null application/javascript;charset=utf-8 8.275ms
2025-07-29 00:41:17.867 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/index.css - 200 202 text/css 24.0984ms
2025-07-29 00:41:17.889 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/swagger-ui-standalone-preset.js - 200 229223 text/javascript 44.9895ms
2025-07-29 00:41:17.889 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/swagger-ui.css - 200 155175 text/css 48.0057ms
2025-07-29 00:41:17.894 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/swagger-ui-bundle.js - 200 1485750 text/javascript 50.5052ms
2025-07-29 00:41:18.019 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/favicon-32x32.png - null null
2025-07-29 00:41:18.022 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/favicon-32x32.png - 200 628 image/png 3.3571ms
2025-07-29 00:41:18.051 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/swagger/v1/swagger.json - null null
2025-07-29 00:41:18.188 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 137.6744ms
2025-07-29 00:41:45.804 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:41:45.806 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:41:45.821 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:41:45.823 +04:00 [INF] HTTP GET /health responded 200 in 16.7996 ms
2025-07-29 00:41:45.824 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 20.5249ms
2025-07-29 00:41:54.648 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5579/api/Auth/login - application/json 53
2025-07-29 00:41:54.652 +04:00 [INF] Executing endpoint 'Flight.Api.Controllers.AuthController.Login (Flight.Api)'
2025-07-29 00:41:54.677 +04:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Application.Authentication.Commands.Login.LoginCommand, System.Threading.CancellationToken) on controller Flight.Api.Controllers.AuthController (Flight.Api).
2025-07-29 00:41:54.720 +04:00 [INF] Executing action method Flight.Api.Controllers.AuthController.Login (Flight.Api) - Validation state: "Valid"
2025-07-29 00:41:54.885 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-07-29 00:41:55.533 +04:00 [INF] User user successfully authenticated
2025-07-29 00:41:55.598 +04:00 [WRN] Long Running Request: LoginCommand (766 milliseconds)   {"Username":"user","Password":"password123","$type":"LoginCommand"}
2025-07-29 00:41:55.610 +04:00 [INF] Executed action method Flight.Api.Controllers.AuthController.Login (Flight.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 883.9851ms.
2025-07-29 00:41:55.623 +04:00 [INF] Executing OkObjectResult, writing value of type 'Application.Authentication.Commands.Login.LoginResponse'.
2025-07-29 00:41:55.633 +04:00 [INF] Executed action Flight.Api.Controllers.AuthController.Login (Flight.Api) in 950.3023ms
2025-07-29 00:41:55.635 +04:00 [INF] Executed endpoint 'Flight.Api.Controllers.AuthController.Login (Flight.Api)'
2025-07-29 00:41:55.636 +04:00 [INF] HTTP POST /api/Auth/login responded 200 in 983.4872 ms
2025-07-29 00:41:55.637 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5579/api/Auth/login - 200 null application/json; charset=utf-8 988.6835ms
2025-07-29 00:42:15.829 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:42:15.831 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:42:15.845 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:42:15.847 +04:00 [INF] HTTP GET /health responded 200 in 15.4381 ms
2025-07-29 00:42:15.848 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 19.044ms
2025-07-29 00:42:45.866 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:42:45.868 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:42:45.883 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:42:45.884 +04:00 [INF] HTTP GET /health responded 200 in 16.2468 ms
2025-07-29 00:42:45.886 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 19.7391ms
2025-07-29 00:43:15.886 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:43:15.888 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:43:15.906 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:43:15.906 +04:00 [INF] HTTP GET /health responded 200 in 18.5967 ms
2025-07-29 00:43:15.908 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 22.3048ms
2025-07-29 00:43:45.907 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:43:45.909 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:43:45.924 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:43:45.925 +04:00 [INF] HTTP GET /health responded 200 in 15.6067 ms
2025-07-29 00:43:45.926 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 18.8983ms
2025-07-29 00:43:47.881 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/api/Flights?origin=a - null null
2025-07-29 00:43:47.889 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 00:43:47.894 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 00:43:47.894 +04:00 [INF] HTTP GET /api/Flights responded 401 in 9.8206 ms
2025-07-29 00:43:47.896 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/api/Flights?origin=a - 401 0 null 14.8311ms
2025-07-29 00:44:07.762 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/api/Flights?origin=a - null null
2025-07-29 00:44:07.817 +04:00 [INF] Executing endpoint 'Flight.Api.Controllers.FlightsController.GetFlights (Flight.Api)'
2025-07-29 00:44:07.821 +04:00 [INF] Route matched with {action = "GetFlights", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFlights(System.String, System.String, System.Threading.CancellationToken) on controller Flight.Api.Controllers.FlightsController (Flight.Api).
2025-07-29 00:44:07.829 +04:00 [INF] Executing action method Flight.Api.Controllers.FlightsController.GetFlights (Flight.Api) - Validation state: "Valid"
2025-07-29 00:44:35.697 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:44:35.729 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:44:35.731 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:44:35.738 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:44:35.746 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:44:35.794 +04:00 [ERR] An unhandled exception occurred
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.CheckHealthAsync(Func`2 predicate, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.HealthChecks.HealthCheckMiddleware.InvokeAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Flight.Api.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\aleks\source\repos\Flight\Api\Middleware\GlobalExceptionMiddleware.cs:line 16
2025-07-29 00:44:35.806 +04:00 [ERR] Server error occurred: TaskCanceledException
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.CheckHealthAsync(Func`2 predicate, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.HealthChecks.HealthCheckMiddleware.InvokeAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Flight.Api.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\aleks\source\repos\Flight\Api\Middleware\GlobalExceptionMiddleware.cs:line 16
2025-07-29 00:44:35.809 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:44:35.810 +04:00 [INF] HTTP GET /health responded 200 in 72.0817 ms
2025-07-29 00:44:35.812 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 82.8253ms
2025-07-29 00:44:35.831 +04:00 [ERR] HTTP GET /health responded 500 in 100.4859 ms
2025-07-29 00:44:35.833 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 500 null application/json 137.8365ms
2025-07-29 00:44:54.247 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__origin_0_contains='?'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
WHERE f."Origin" LIKE @__origin_0_contains
2025-07-29 00:44:54.274 +04:00 [INF] Retrieved 5 flights from database
2025-07-29 00:45:05.006 +04:00 [WRN] Long Running Request: GetFlightsQuery (29195 milliseconds) 1  {"Origin":"a","Destination":null,"CacheKey":"flights:a:all","CacheExpiration":"00:05:00","$type":"GetFlightsQuery"}
2025-07-29 00:45:40.315 +04:00 [INF] Executed action method Flight.Api.Controllers.FlightsController.GetFlights (Flight.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 92485.2796ms.
2025-07-29 00:45:40.321 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[Domain.Entities.Flight, Flight.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Application.Flights.Queries.GetFlights.FlightResponse, Flight.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-29 00:45:40.332 +04:00 [INF] Executed action Flight.Api.Controllers.FlightsController.GetFlights (Flight.Api) in 92509.4018ms
2025-07-29 00:45:40.336 +04:00 [INF] Executed endpoint 'Flight.Api.Controllers.FlightsController.GetFlights (Flight.Api)'
2025-07-29 00:45:40.340 +04:00 [INF] HTTP GET /api/Flights responded 200 in 92574.4728 ms
2025-07-29 00:45:40.343 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:45:40.346 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/api/Flights?origin=a - 200 null application/json; charset=utf-8 92583.6929ms
2025-07-29 00:45:40.343 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:45:40.344 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:45:40.354 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:45:40.358 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:45:40.359 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:45:40.361 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:45:40.362 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:45:40.363 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:45:40.397 +04:00 [ERR] An unhandled exception occurred
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.CheckHealthAsync(Func`2 predicate, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.HealthChecks.HealthCheckMiddleware.InvokeAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Flight.Api.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\aleks\source\repos\Flight\Api\Middleware\GlobalExceptionMiddleware.cs:line 16
2025-07-29 00:45:40.425 +04:00 [ERR] An unhandled exception occurred
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.CheckHealthAsync(Func`2 predicate, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.HealthChecks.HealthCheckMiddleware.InvokeAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Flight.Api.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\aleks\source\repos\Flight\Api\Middleware\GlobalExceptionMiddleware.cs:line 16
2025-07-29 00:45:40.438 +04:00 [ERR] An unhandled exception occurred
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.CheckHealthAsync(Func`2 predicate, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.HealthChecks.HealthCheckMiddleware.InvokeAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Flight.Api.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\aleks\source\repos\Flight\Api\Middleware\GlobalExceptionMiddleware.cs:line 16
2025-07-29 00:45:40.439 +04:00 [ERR] Server error occurred: TaskCanceledException
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.CheckHealthAsync(Func`2 predicate, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.HealthChecks.HealthCheckMiddleware.InvokeAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Flight.Api.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\aleks\source\repos\Flight\Api\Middleware\GlobalExceptionMiddleware.cs:line 16
2025-07-29 00:45:40.441 +04:00 [ERR] Server error occurred: TaskCanceledException
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.CheckHealthAsync(Func`2 predicate, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.HealthChecks.HealthCheckMiddleware.InvokeAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Flight.Api.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\aleks\source\repos\Flight\Api\Middleware\GlobalExceptionMiddleware.cs:line 16
2025-07-29 00:45:40.443 +04:00 [ERR] Server error occurred: TaskCanceledException
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.CheckHealthAsync(Func`2 predicate, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.HealthChecks.HealthCheckMiddleware.InvokeAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Flight.Api.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\aleks\source\repos\Flight\Api\Middleware\GlobalExceptionMiddleware.cs:line 16
2025-07-29 00:45:40.446 +04:00 [ERR] HTTP GET /health responded 500 in 92.0110 ms
2025-07-29 00:45:40.448 +04:00 [ERR] HTTP GET /health responded 500 in 90.3461 ms
2025-07-29 00:45:40.450 +04:00 [ERR] HTTP GET /health responded 500 in 90.5667 ms
2025-07-29 00:45:40.451 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 500 null application/json 107.9129ms
2025-07-29 00:45:40.452 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 500 null application/json 109.2202ms
2025-07-29 00:45:40.453 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 500 null application/json 109.3385ms
2025-07-29 00:45:41.921 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:45:41.924 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:45:41.939 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:45:41.940 +04:00 [INF] HTTP GET /health responded 200 in 16.6752 ms
2025-07-29 00:45:41.943 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 21.7323ms
2025-07-29 00:45:53.550 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/api/Flights?origin=c - null null
2025-07-29 00:45:53.554 +04:00 [INF] Executing endpoint 'Flight.Api.Controllers.FlightsController.GetFlights (Flight.Api)'
2025-07-29 00:45:53.555 +04:00 [INF] Route matched with {action = "GetFlights", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFlights(System.String, System.String, System.Threading.CancellationToken) on controller Flight.Api.Controllers.FlightsController (Flight.Api).
2025-07-29 00:45:53.557 +04:00 [INF] Executing action method Flight.Api.Controllers.FlightsController.GetFlights (Flight.Api) - Validation state: "Valid"
2025-07-29 00:45:57.529 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__origin_0_contains='?'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
WHERE f."Origin" LIKE @__origin_0_contains
2025-07-29 00:45:57.531 +04:00 [INF] Retrieved 2 flights from database
2025-07-29 00:46:06.944 +04:00 [WRN] Long Running Request: GetFlightsQuery (10137 milliseconds) 1  {"Origin":"c","Destination":null,"CacheKey":"flights:c:all","CacheExpiration":"00:05:00","$type":"GetFlightsQuery"}
2025-07-29 00:46:08.161 +04:00 [INF] Executed action method Flight.Api.Controllers.FlightsController.GetFlights (Flight.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 14603.9089ms.
2025-07-29 00:46:08.164 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[Domain.Entities.Flight, Flight.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Application.Flights.Queries.GetFlights.FlightResponse, Flight.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-29 00:46:08.166 +04:00 [INF] Executed action Flight.Api.Controllers.FlightsController.GetFlights (Flight.Api) in 14609.3623ms
2025-07-29 00:46:08.167 +04:00 [INF] Executed endpoint 'Flight.Api.Controllers.FlightsController.GetFlights (Flight.Api)'
2025-07-29 00:46:08.168 +04:00 [INF] HTTP GET /api/Flights responded 200 in 14615.0422 ms
2025-07-29 00:46:08.169 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/api/Flights?origin=c - 200 null application/json; charset=utf-8 14619.1848ms
2025-07-29 00:46:11.954 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:46:11.956 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:46:11.972 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:46:11.973 +04:00 [INF] HTTP GET /health responded 200 in 16.4064 ms
2025-07-29 00:46:11.974 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 19.867ms
2025-07-29 00:46:41.987 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:46:41.989 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:46:42.004 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:46:42.005 +04:00 [INF] HTTP GET /health responded 200 in 16.0897 ms
2025-07-29 00:46:42.006 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 19.5631ms
2025-07-29 00:46:55.244 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5579/api/Flights - application/json 150
2025-07-29 00:46:55.248 +04:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Moderator)
2025-07-29 00:46:55.251 +04:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-07-29 00:46:55.252 +04:00 [INF] HTTP POST /api/Flights responded 403 in 5.9254 ms
2025-07-29 00:46:55.253 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5579/api/Flights - 403 0 null 9.887ms
2025-07-29 00:47:06.259 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5579/api/Flights - application/json 150
2025-07-29 00:47:06.261 +04:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Moderator)
2025-07-29 00:47:06.262 +04:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-07-29 00:47:06.263 +04:00 [INF] HTTP POST /api/Flights responded 403 in 2.2591 ms
2025-07-29 00:47:06.265 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5579/api/Flights - 403 0 null 5.943ms
2025-07-29 00:47:12.019 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:47:12.021 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:47:12.037 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:47:12.038 +04:00 [INF] HTTP GET /health responded 200 in 16.9829 ms
2025-07-29 00:47:12.041 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 21.414ms
2025-07-29 00:47:42.051 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:47:42.053 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:47:42.068 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:47:42.069 +04:00 [INF] HTTP GET /health responded 200 in 16.2003 ms
2025-07-29 00:47:42.071 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 20.3657ms
2025-07-29 00:47:42.186 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5579/api/Auth/login - application/json 54
2025-07-29 00:47:42.189 +04:00 [INF] Executing endpoint 'Flight.Api.Controllers.AuthController.Login (Flight.Api)'
2025-07-29 00:47:42.190 +04:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Application.Authentication.Commands.Login.LoginCommand, System.Threading.CancellationToken) on controller Flight.Api.Controllers.AuthController (Flight.Api).
2025-07-29 00:47:42.192 +04:00 [INF] Executing action method Flight.Api.Controllers.AuthController.Login (Flight.Api) - Validation state: "Valid"
2025-07-29 00:47:42.201 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-07-29 00:47:42.696 +04:00 [INF] User admin successfully authenticated
2025-07-29 00:47:42.698 +04:00 [WRN] Long Running Request: LoginCommand (502 milliseconds) 1  {"Username":"admin","Password":"password123","$type":"LoginCommand"}
2025-07-29 00:47:42.700 +04:00 [INF] Executed action method Flight.Api.Controllers.AuthController.Login (Flight.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 506.1369ms.
2025-07-29 00:47:42.701 +04:00 [INF] Executing OkObjectResult, writing value of type 'Application.Authentication.Commands.Login.LoginResponse'.
2025-07-29 00:47:42.702 +04:00 [INF] Executed action Flight.Api.Controllers.AuthController.Login (Flight.Api) in 510.63ms
2025-07-29 00:47:42.704 +04:00 [INF] Executed endpoint 'Flight.Api.Controllers.AuthController.Login (Flight.Api)'
2025-07-29 00:47:42.704 +04:00 [INF] HTTP POST /api/Auth/login responded 200 in 515.4780 ms
2025-07-29 00:47:42.706 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5579/api/Auth/login - 200 null application/json; charset=utf-8 519.7252ms
2025-07-29 00:48:12.082 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:48:12.085 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:48:12.100 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:48:12.101 +04:00 [INF] HTTP GET /health responded 200 in 16.7763 ms
2025-07-29 00:48:12.103 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 20.8918ms
2025-07-29 00:48:22.479 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5579/api/Flights - application/json 150
2025-07-29 00:48:22.482 +04:00 [INF] Executing endpoint 'Flight.Api.Controllers.FlightsController.CreateFlight (Flight.Api)'
2025-07-29 00:48:22.485 +04:00 [INF] Route matched with {action = "CreateFlight", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateFlight(Application.Flights.Commands.CreateFlight.CreateFlightCommand, System.Threading.CancellationToken) on controller Flight.Api.Controllers.FlightsController (Flight.Api).
2025-07-29 00:48:22.498 +04:00 [INF] Executing action method Flight.Api.Controllers.FlightsController.CreateFlight (Flight.Api) - Validation state: "Valid"
2025-07-29 00:48:29.479 +04:00 [ERR] Unhandled Exception for Request CreateFlightCommand {"Origin":"string","Destination":"string","Departure":"2025-07-28T20:46:46.1630000+00:00","Arrival":"2025-07-28T20:46:46.1630000+00:00","Status":"InTime","$type":"CreateFlightCommand"}
Application.Common.Exceptions.ValidationException: One or more validation failures have occurred.
   at Application.Common.Behaviours.ValidationBehaviour`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Application\Common\Behaviours\ValidationBehaviour.cs:line 23
   at Application.Common.Behaviours.AuthorizationBehaviour`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Application\Common\Behaviours\AuthorizationBehaviour.cs:line 56
   at Application.Common.Behaviours.UnhandledExceptionBehaviour`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Application\Common\Behaviours\UnhandledExceptionBehaviour.cs:line 13
2025-07-29 00:48:29.537 +04:00 [INF] Executed action Flight.Api.Controllers.FlightsController.CreateFlight (Flight.Api) in 7050.0455ms
2025-07-29 00:48:29.539 +04:00 [INF] Executed endpoint 'Flight.Api.Controllers.FlightsController.CreateFlight (Flight.Api)'
2025-07-29 00:48:29.562 +04:00 [ERR] An unhandled exception occurred
Application.Common.Exceptions.ValidationException: One or more validation failures have occurred.
   at Application.Common.Behaviours.ValidationBehaviour`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Application\Common\Behaviours\ValidationBehaviour.cs:line 23
   at Application.Common.Behaviours.AuthorizationBehaviour`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Application\Common\Behaviours\AuthorizationBehaviour.cs:line 56
   at Application.Common.Behaviours.UnhandledExceptionBehaviour`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Application\Common\Behaviours\UnhandledExceptionBehaviour.cs:line 13
   at Flight.Api.Controllers.FlightsController.CreateFlight(CreateFlightCommand command, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Api\Controllers\FlightsController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Flight.Api.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\aleks\source\repos\Flight\Api\Middleware\GlobalExceptionMiddleware.cs:line 16
2025-07-29 00:48:29.572 +04:00 [WRN] Client error occurred: ValidationException
Application.Common.Exceptions.ValidationException: One or more validation failures have occurred.
   at Application.Common.Behaviours.ValidationBehaviour`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Application\Common\Behaviours\ValidationBehaviour.cs:line 23
   at Application.Common.Behaviours.AuthorizationBehaviour`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Application\Common\Behaviours\AuthorizationBehaviour.cs:line 56
   at Application.Common.Behaviours.UnhandledExceptionBehaviour`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Application\Common\Behaviours\UnhandledExceptionBehaviour.cs:line 13
   at Flight.Api.Controllers.FlightsController.CreateFlight(CreateFlightCommand command, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Api\Controllers\FlightsController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Flight.Api.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\aleks\source\repos\Flight\Api\Middleware\GlobalExceptionMiddleware.cs:line 16
2025-07-29 00:48:29.581 +04:00 [INF] HTTP POST /api/Flights responded 400 in 7098.8900 ms
2025-07-29 00:48:29.583 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5579/api/Flights - 400 null application/json 7103.4604ms
2025-07-29 00:48:42.113 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:48:42.115 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:48:42.129 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:48:42.130 +04:00 [INF] HTTP GET /health responded 200 in 14.7262 ms
2025-07-29 00:48:42.131 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 18.3481ms
2025-07-29 00:49:12.144 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:49:12.146 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:49:12.160 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:49:12.161 +04:00 [INF] HTTP GET /health responded 200 in 14.9036 ms
2025-07-29 00:49:12.162 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 18.6639ms
2025-07-29 00:49:42.173 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:49:42.175 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:49:42.188 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:49:42.190 +04:00 [INF] HTTP GET /health responded 200 in 14.6948 ms
2025-07-29 00:49:42.191 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 18.6927ms
2025-07-29 00:50:12.200 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:50:12.203 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:50:12.216 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:50:12.217 +04:00 [INF] HTTP GET /health responded 200 in 14.6775 ms
2025-07-29 00:50:12.219 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 18.8035ms
2025-07-29 00:50:42.224 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:50:42.226 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:50:42.240 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:50:42.241 +04:00 [INF] HTTP GET /health responded 200 in 15.3373 ms
2025-07-29 00:50:42.243 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 19.1364ms
2025-07-29 00:51:12.259 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:51:12.261 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:51:12.275 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:51:12.276 +04:00 [INF] HTTP GET /health responded 200 in 15.1392 ms
2025-07-29 00:51:12.277 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 18.2303ms
2025-07-29 00:51:42.278 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:51:42.280 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:51:42.295 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:51:42.296 +04:00 [INF] HTTP GET /health responded 200 in 16.3412 ms
2025-07-29 00:51:42.297 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 19.5789ms
2025-07-29 00:52:12.300 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:52:12.302 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:52:12.317 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:52:12.318 +04:00 [INF] HTTP GET /health responded 200 in 16.2948 ms
2025-07-29 00:52:12.320 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 19.7137ms
2025-07-29 00:52:42.319 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:52:42.322 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:52:42.337 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:52:42.338 +04:00 [INF] HTTP GET /health responded 200 in 16.0460 ms
2025-07-29 00:52:42.340 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 20.3613ms
2025-07-29 00:53:12.351 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:53:12.353 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:53:12.369 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:53:12.370 +04:00 [INF] HTTP GET /health responded 200 in 17.0889 ms
2025-07-29 00:53:12.372 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 20.9355ms
2025-07-29 00:53:42.379 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:53:42.381 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:53:42.397 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:53:42.398 +04:00 [INF] HTTP GET /health responded 200 in 17.0861 ms
2025-07-29 00:53:42.400 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 21.1645ms
2025-07-29 00:54:12.401 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:54:12.404 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:54:12.418 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:54:12.419 +04:00 [INF] HTTP GET /health responded 200 in 15.6483 ms
2025-07-29 00:54:12.421 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 19.3225ms
2025-07-29 00:54:42.421 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:54:42.423 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:54:42.437 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:54:42.438 +04:00 [INF] HTTP GET /health responded 200 in 14.8931 ms
2025-07-29 00:54:42.439 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 18.1818ms
2025-07-29 00:55:12.457 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:55:12.459 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:55:12.473 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:55:12.474 +04:00 [INF] HTTP GET /health responded 200 in 15.0307 ms
2025-07-29 00:55:12.475 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 17.9476ms
2025-07-29 00:55:42.481 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:55:42.483 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:55:42.500 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:55:42.501 +04:00 [INF] HTTP GET /health responded 200 in 18.1313 ms
2025-07-29 00:55:42.503 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 22.4401ms
2025-07-29 00:56:12.510 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:56:12.512 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:56:12.526 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:56:12.527 +04:00 [INF] HTTP GET /health responded 200 in 15.2391 ms
2025-07-29 00:56:12.529 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 19.1477ms
2025-07-29 00:56:42.537 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:56:42.539 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:56:42.554 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:56:42.555 +04:00 [INF] HTTP GET /health responded 200 in 15.6392 ms
2025-07-29 00:56:42.556 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 19.0311ms
2025-07-29 00:57:12.570 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:57:12.572 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:57:12.590 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:57:12.592 +04:00 [INF] HTTP GET /health responded 200 in 19.4418 ms
2025-07-29 00:57:12.594 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 23.5345ms
2025-07-29 00:57:42.593 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:57:42.595 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:57:42.609 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:57:42.610 +04:00 [INF] HTTP GET /health responded 200 in 15.2099 ms
2025-07-29 00:57:42.612 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 18.7989ms
2025-07-29 00:58:12.623 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:58:12.625 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:58:12.639 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:58:12.640 +04:00 [INF] HTTP GET /health responded 200 in 15.0509 ms
2025-07-29 00:58:12.641 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 18.4253ms
2025-07-29 00:58:42.655 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:58:42.657 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:58:42.671 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:58:42.672 +04:00 [INF] HTTP GET /health responded 200 in 14.7908 ms
2025-07-29 00:58:42.673 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 18.3467ms
2025-07-29 00:59:12.686 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:59:12.688 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:59:12.703 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:59:12.704 +04:00 [INF] HTTP GET /health responded 200 in 15.5023 ms
2025-07-29 00:59:12.705 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 18.9496ms
2025-07-29 00:59:42.715 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 00:59:42.717 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 00:59:42.731 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 00:59:42.732 +04:00 [INF] HTTP GET /health responded 200 in 15.1938 ms
2025-07-29 00:59:42.733 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 18.8511ms
2025-07-29 01:00:12.735 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:00:12.742 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:00:12.772 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:00:12.773 +04:00 [INF] HTTP GET /health responded 200 in 31.2343 ms
2025-07-29 01:00:12.775 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 39.9772ms
2025-07-29 01:00:42.782 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:00:42.784 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:00:42.798 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:00:42.799 +04:00 [INF] HTTP GET /health responded 200 in 15.1537 ms
2025-07-29 01:00:42.800 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 18.4631ms
2025-07-29 01:01:12.818 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:01:12.820 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:01:12.834 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:01:12.835 +04:00 [INF] HTTP GET /health responded 200 in 15.3209 ms
2025-07-29 01:01:12.836 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 18.3168ms
2025-07-29 01:01:42.846 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:01:42.849 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:01:42.865 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:01:42.866 +04:00 [INF] HTTP GET /health responded 200 in 16.7292 ms
2025-07-29 01:01:42.867 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 20.9123ms
2025-07-29 01:02:12.872 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:02:12.875 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:02:12.890 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:02:12.891 +04:00 [INF] HTTP GET /health responded 200 in 16.7600 ms
2025-07-29 01:02:12.893 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 20.2708ms
2025-07-29 01:02:42.904 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:02:42.906 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:02:42.920 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:02:42.922 +04:00 [INF] HTTP GET /health responded 200 in 15.9511 ms
2025-07-29 01:02:42.923 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 19.7609ms
2025-07-29 01:03:12.941 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:03:12.942 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:03:12.956 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:03:12.958 +04:00 [INF] HTTP GET /health responded 200 in 15.2560 ms
2025-07-29 01:03:12.959 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 18.6768ms
2025-07-29 01:03:42.962 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:03:42.964 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:03:42.979 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:03:42.980 +04:00 [INF] HTTP GET /health responded 200 in 16.1859 ms
2025-07-29 01:03:42.981 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 20.019ms
2025-07-29 01:04:12.991 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:04:12.993 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:04:13.007 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:04:13.008 +04:00 [INF] HTTP GET /health responded 200 in 15.0739 ms
2025-07-29 01:04:13.010 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 18.399ms
2025-07-29 01:04:43.019 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:04:43.021 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:04:43.036 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:04:43.037 +04:00 [INF] HTTP GET /health responded 200 in 15.6932 ms
2025-07-29 01:04:43.038 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 19.3793ms
2025-07-29 01:05:13.051 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:05:13.054 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:05:13.071 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:05:13.072 +04:00 [INF] HTTP GET /health responded 200 in 18.0933 ms
2025-07-29 01:05:13.075 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 23.5786ms
2025-07-29 01:05:43.080 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:05:43.082 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:05:43.097 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:05:43.098 +04:00 [INF] HTTP GET /health responded 200 in 15.8796 ms
2025-07-29 01:05:43.100 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 19.5101ms
2025-07-29 01:06:13.102 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:06:13.105 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:06:13.120 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:06:13.121 +04:00 [INF] HTTP GET /health responded 200 in 16.1130 ms
2025-07-29 01:06:13.123 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 20.9334ms
2025-07-29 01:06:43.139 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:06:43.143 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:06:43.187 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:06:43.193 +04:00 [INF] HTTP GET /health responded 200 in 50.3638 ms
2025-07-29 01:06:43.196 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 57.1187ms
2025-07-29 01:06:47.093 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5579/api/Flights - application/json 150
2025-07-29 01:06:47.095 +04:00 [INF] Executing endpoint 'Flight.Api.Controllers.FlightsController.CreateFlight (Flight.Api)'
2025-07-29 01:06:47.096 +04:00 [INF] Route matched with {action = "CreateFlight", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateFlight(Application.Flights.Commands.CreateFlight.CreateFlightCommand, System.Threading.CancellationToken) on controller Flight.Api.Controllers.FlightsController (Flight.Api).
2025-07-29 01:06:47.098 +04:00 [INF] Executing action method Flight.Api.Controllers.FlightsController.CreateFlight (Flight.Api) - Validation state: "Valid"
2025-07-29 01:06:50.527 +04:00 [INF] Cache invalidated after flight creation: 0 from string to string
2025-07-29 01:06:50.609 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Flights" ("Arrival", "Departure", "Destination", "Origin", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-07-29 01:06:50.636 +04:00 [INF] Created flight 9 from string to string
2025-07-29 01:07:04.477 +04:00 [INF] Executed action method Flight.Api.Controllers.FlightsController.CreateFlight (Flight.Api), returned result Microsoft.AspNetCore.Mvc.CreatedAtActionResult in 17376.9456ms.
2025-07-29 01:07:04.481 +04:00 [INF] Executing CreatedAtActionResult, writing value of type 'Application.Flights.Queries.GetFlights.FlightResponse'.
2025-07-29 01:07:04.508 +04:00 [INF] Executed action Flight.Api.Controllers.FlightsController.CreateFlight (Flight.Api) in 17410.0601ms
2025-07-29 01:07:04.510 +04:00 [INF] Executed endpoint 'Flight.Api.Controllers.FlightsController.CreateFlight (Flight.Api)'
2025-07-29 01:07:04.510 +04:00 [INF] HTTP POST /api/Flights responded 201 in 17415.4028 ms
2025-07-29 01:07:04.512 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5579/api/Flights - 201 null application/json; charset=utf-8 17418.6493ms
2025-07-29 01:07:13.211 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:07:13.213 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:07:13.227 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:07:13.229 +04:00 [INF] HTTP GET /health responded 200 in 15.4859 ms
2025-07-29 01:07:13.230 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 19.1694ms
2025-07-29 01:07:21.157 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/api/Flights?origin=c - null null
2025-07-29 01:07:21.160 +04:00 [INF] Executing endpoint 'Flight.Api.Controllers.FlightsController.GetFlights (Flight.Api)'
2025-07-29 01:07:21.160 +04:00 [INF] Route matched with {action = "GetFlights", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFlights(System.String, System.String, System.Threading.CancellationToken) on controller Flight.Api.Controllers.FlightsController (Flight.Api).
2025-07-29 01:07:21.162 +04:00 [INF] Executing action method Flight.Api.Controllers.FlightsController.GetFlights (Flight.Api) - Validation state: "Valid"
2025-07-29 01:07:24.620 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__origin_0_contains='?'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
WHERE f."Origin" LIKE @__origin_0_contains
2025-07-29 01:07:24.623 +04:00 [INF] Retrieved 2 flights from database
2025-07-29 01:07:25.369 +04:00 [WRN] Long Running Request: GetFlightsQuery (1566 milliseconds) 3  {"Origin":"c","Destination":null,"CacheKey":"flights:c:all","CacheExpiration":"00:05:00","$type":"GetFlightsQuery"}
2025-07-29 01:07:26.178 +04:00 [INF] Executed action method Flight.Api.Controllers.FlightsController.GetFlights (Flight.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5014.9272ms.
2025-07-29 01:07:26.182 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[Domain.Entities.Flight, Flight.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Application.Flights.Queries.GetFlights.FlightResponse, Flight.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-29 01:07:26.183 +04:00 [INF] Executed action Flight.Api.Controllers.FlightsController.GetFlights (Flight.Api) in 5021.4525ms
2025-07-29 01:07:26.185 +04:00 [INF] Executed endpoint 'Flight.Api.Controllers.FlightsController.GetFlights (Flight.Api)'
2025-07-29 01:07:26.186 +04:00 [INF] HTTP GET /api/Flights responded 200 in 5026.4873 ms
2025-07-29 01:07:26.187 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/api/Flights?origin=c - 200 null application/json; charset=utf-8 5030.4554ms
2025-07-29 01:07:37.659 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5579/api/Flights - application/json 150
2025-07-29 01:07:37.662 +04:00 [INF] Executing endpoint 'Flight.Api.Controllers.FlightsController.CreateFlight (Flight.Api)'
2025-07-29 01:07:37.662 +04:00 [INF] Route matched with {action = "CreateFlight", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateFlight(Application.Flights.Commands.CreateFlight.CreateFlightCommand, System.Threading.CancellationToken) on controller Flight.Api.Controllers.FlightsController (Flight.Api).
2025-07-29 01:07:37.664 +04:00 [INF] Executing action method Flight.Api.Controllers.FlightsController.CreateFlight (Flight.Api) - Validation state: "Valid"
2025-07-29 01:07:39.579 +04:00 [INF] Removed 1 keys matching pattern flights:*
2025-07-29 01:07:39.579 +04:00 [INF] Cache invalidated after flight creation: 0 from string to string
2025-07-29 01:07:39.584 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Flights" ("Arrival", "Departure", "Destination", "Origin", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-07-29 01:07:39.586 +04:00 [INF] Created flight 10 from string to string
2025-07-29 01:07:40.403 +04:00 [INF] Executed action method Flight.Api.Controllers.FlightsController.CreateFlight (Flight.Api), returned result Microsoft.AspNetCore.Mvc.CreatedAtActionResult in 2738.4293ms.
2025-07-29 01:07:40.405 +04:00 [INF] Executing CreatedAtActionResult, writing value of type 'Application.Flights.Queries.GetFlights.FlightResponse'.
2025-07-29 01:07:40.407 +04:00 [INF] Executed action Flight.Api.Controllers.FlightsController.CreateFlight (Flight.Api) in 2742.9668ms
2025-07-29 01:07:40.408 +04:00 [INF] Executed endpoint 'Flight.Api.Controllers.FlightsController.CreateFlight (Flight.Api)'
2025-07-29 01:07:40.409 +04:00 [INF] HTTP POST /api/Flights responded 201 in 2747.8586 ms
2025-07-29 01:07:40.410 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5579/api/Flights - 201 null application/json; charset=utf-8 2751.5729ms
2025-07-29 01:07:43.238 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:07:43.240 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:07:43.255 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:07:43.256 +04:00 [INF] HTTP GET /health responded 200 in 15.2775 ms
2025-07-29 01:07:43.257 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 18.5792ms
2025-07-29 01:08:13.272 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:08:13.274 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:08:13.288 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:08:13.290 +04:00 [INF] HTTP GET /health responded 200 in 15.5769 ms
2025-07-29 01:08:13.291 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 19.6173ms
2025-07-29 01:08:43.301 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:08:43.303 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:08:43.316 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:08:43.317 +04:00 [INF] HTTP GET /health responded 200 in 14.8264 ms
2025-07-29 01:08:43.319 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 18.4286ms
2025-07-29 01:09:13.333 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:09:13.335 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:09:13.350 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:09:13.351 +04:00 [INF] HTTP GET /health responded 200 in 15.3266 ms
2025-07-29 01:09:13.352 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 18.79ms
2025-07-29 01:09:43.364 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:09:43.376 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:09:43.406 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:09:43.407 +04:00 [INF] HTTP GET /health responded 200 in 31.9673 ms
2025-07-29 01:09:43.409 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 45.6246ms
2025-07-29 01:10:38.677 +04:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-07-29 01:10:40.212 +04:00 [INF] Executed DbCommand (120ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 01:10:40.257 +04:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-29 01:10:40.288 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 01:10:40.307 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 01:10:40.311 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-29 01:10:40.328 +04:00 [INF] No migrations were applied. The database is already up to date.
2025-07-29 01:10:40.778 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r
    WHERE r."Code" = 'User')
2025-07-29 01:10:40.813 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r
    WHERE r."Code" = 'Moderator')
2025-07-29 01:10:40.879 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id"
FROM "Roles" AS r
WHERE r."Code" = 'User'
LIMIT 1
2025-07-29 01:10:40.892 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id"
FROM "Roles" AS r
WHERE r."Code" = 'Moderator'
LIMIT 1
2025-07-29 01:10:41.576 +04:00 [INF] Executed DbCommand (22ms) [Parameters=[@__regularUser_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u
    WHERE u."Username" = @__regularUser_Username_0)
2025-07-29 01:10:41.584 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__moderatorUser_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u
    WHERE u."Username" = @__moderatorUser_Username_0)
2025-07-29 01:10:41.590 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__adminUser_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u
    WHERE u."Username" = @__adminUser_Username_0)
2025-07-29 01:10:41.600 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Flights" AS f)
2025-07-29 01:10:41.647 +04:00 [INF] User profile is available. Using 'C:\Users\aleks\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-29 01:10:42.014 +04:00 [INF] Now listening on: http://localhost:57674
2025-07-29 01:10:42.016 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-29 01:10:42.018 +04:00 [INF] Hosting environment: Development
2025-07-29 01:10:42.019 +04:00 [INF] Content root path: C:\Users\aleks\source\repos\Flight\Api
2025-07-29 01:10:43.100 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:10:43.151 +04:00 [WRN] Failed to determine the https port for redirect.
2025-07-29 01:10:43.219 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:10:43.453 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:10:43.459 +04:00 [INF] HTTP GET /health responded 200 in 303.5057 ms
2025-07-29 01:10:43.466 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 385.8291ms
2025-07-29 01:11:13.469 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:11:13.473 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:11:13.509 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:11:13.510 +04:00 [INF] HTTP GET /health responded 200 in 38.2588 ms
2025-07-29 01:11:13.512 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 42.9059ms
2025-07-29 01:11:22.207 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/index.html - null null
2025-07-29 01:11:22.290 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/index.html - 200 null text/html;charset=utf-8 83.7204ms
2025-07-29 01:11:22.435 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/favicon-32x32.png - null null
2025-07-29 01:11:22.450 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/favicon-32x32.png - 499 628 image/png 14.9308ms
2025-07-29 01:11:22.467 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/swagger/v1/swagger.json - null null
2025-07-29 01:11:22.588 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 121.4781ms
2025-07-29 01:11:32.844 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5579/api/Flights - application/json 157
2025-07-29 01:11:32.853 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Moderator)
2025-07-29 01:11:32.858 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 01:11:32.859 +04:00 [INF] HTTP POST /api/Flights responded 401 in 12.1218 ms
2025-07-29 01:11:32.861 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5579/api/Flights - 401 0 null 17.4764ms
2025-07-29 01:11:43.522 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:11:43.525 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:11:43.541 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:11:43.542 +04:00 [INF] HTTP GET /health responded 200 in 17.9929 ms
2025-07-29 01:11:43.544 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 21.7053ms
2025-07-29 01:12:07.900 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5579/api/Auth/login - application/json 54
2025-07-29 01:12:07.903 +04:00 [INF] Executing endpoint 'Flight.Api.Controllers.AuthController.Login (Flight.Api)'
2025-07-29 01:12:07.921 +04:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Application.Authentication.Commands.Login.LoginCommand, System.Threading.CancellationToken) on controller Flight.Api.Controllers.AuthController (Flight.Api).
2025-07-29 01:12:07.957 +04:00 [INF] Executing action method Flight.Api.Controllers.AuthController.Login (Flight.Api) - Validation state: "Valid"
2025-07-29 01:12:08.111 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-07-29 01:12:08.713 +04:00 [INF] User admin successfully authenticated
2025-07-29 01:12:08.726 +04:00 [WRN] Long Running Request: LoginCommand (718 milliseconds)   {"Username":"admin","Password":"password123","$type":"LoginCommand"}
2025-07-29 01:12:08.737 +04:00 [INF] Executed action method Flight.Api.Controllers.AuthController.Login (Flight.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 774.8666ms.
2025-07-29 01:12:08.749 +04:00 [INF] Executing OkObjectResult, writing value of type 'Application.Authentication.Commands.Login.LoginResponse'.
2025-07-29 01:12:08.758 +04:00 [INF] Executed action Flight.Api.Controllers.AuthController.Login (Flight.Api) in 830.5647ms
2025-07-29 01:12:08.759 +04:00 [INF] Executed endpoint 'Flight.Api.Controllers.AuthController.Login (Flight.Api)'
2025-07-29 01:12:08.760 +04:00 [INF] HTTP POST /api/Auth/login responded 200 in 857.0345 ms
2025-07-29 01:12:08.762 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5579/api/Auth/login - 200 null application/json; charset=utf-8 861.8157ms
2025-07-29 01:12:13.543 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:12:13.545 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:12:13.559 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:12:13.560 +04:00 [INF] HTTP GET /health responded 200 in 14.9352 ms
2025-07-29 01:12:13.562 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 18.279ms
2025-07-29 01:12:33.271 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5579/api/Flights - application/json 157
2025-07-29 01:12:33.330 +04:00 [INF] Executing endpoint 'Flight.Api.Controllers.FlightsController.CreateFlight (Flight.Api)'
2025-07-29 01:12:33.334 +04:00 [INF] Route matched with {action = "CreateFlight", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateFlight(Application.Flights.Commands.CreateFlight.CreateFlightCommand, System.Threading.CancellationToken) on controller Flight.Api.Controllers.FlightsController (Flight.Api).
2025-07-29 01:12:33.357 +04:00 [INF] Executing action method Flight.Api.Controllers.FlightsController.CreateFlight (Flight.Api) - Validation state: "Valid"
2025-07-29 01:12:38.221 +04:00 [ERR] Unhandled Exception for Request CreateFlightCommand {"Origin":"string","Destination":"string","Departure":"2025-07-28T21:11:27.5960000+00:00","Arrival":"2025-07-28T21:11:27.5960000+00:00","Status":"InTime","$type":"CreateFlightCommand"}
Application.Common.Exceptions.ValidationException: One or more validation failures have occurred.
   at Application.Common.Behaviours.ValidationBehaviour`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Application\Common\Behaviours\ValidationBehaviour.cs:line 23
   at Application.Common.Behaviours.AuthorizationBehaviour`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Application\Common\Behaviours\AuthorizationBehaviour.cs:line 56
   at Application.Common.Behaviours.UnhandledExceptionBehaviour`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Application\Common\Behaviours\UnhandledExceptionBehaviour.cs:line 13
2025-07-29 01:12:38.274 +04:00 [INF] Executed action Flight.Api.Controllers.FlightsController.CreateFlight (Flight.Api) in 4938.1722ms
2025-07-29 01:12:38.277 +04:00 [INF] Executed endpoint 'Flight.Api.Controllers.FlightsController.CreateFlight (Flight.Api)'
2025-07-29 01:12:38.296 +04:00 [ERR] An unhandled exception occurred
Application.Common.Exceptions.ValidationException: One or more validation failures have occurred.
   at Application.Common.Behaviours.ValidationBehaviour`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Application\Common\Behaviours\ValidationBehaviour.cs:line 23
   at Application.Common.Behaviours.AuthorizationBehaviour`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Application\Common\Behaviours\AuthorizationBehaviour.cs:line 56
   at Application.Common.Behaviours.UnhandledExceptionBehaviour`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Application\Common\Behaviours\UnhandledExceptionBehaviour.cs:line 13
   at Flight.Api.Controllers.FlightsController.CreateFlight(CreateFlightCommand command, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Api\Controllers\FlightsController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Flight.Api.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\aleks\source\repos\Flight\Api\Middleware\GlobalExceptionMiddleware.cs:line 16
2025-07-29 01:12:38.303 +04:00 [WRN] Client error occurred: ValidationException
Application.Common.Exceptions.ValidationException: One or more validation failures have occurred.
   at Application.Common.Behaviours.ValidationBehaviour`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Application\Common\Behaviours\ValidationBehaviour.cs:line 23
   at Application.Common.Behaviours.AuthorizationBehaviour`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Application\Common\Behaviours\AuthorizationBehaviour.cs:line 56
   at Application.Common.Behaviours.UnhandledExceptionBehaviour`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Application\Common\Behaviours\UnhandledExceptionBehaviour.cs:line 13
   at Flight.Api.Controllers.FlightsController.CreateFlight(CreateFlightCommand command, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Api\Controllers\FlightsController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Flight.Api.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\aleks\source\repos\Flight\Api\Middleware\GlobalExceptionMiddleware.cs:line 16
2025-07-29 01:12:38.320 +04:00 [INF] HTTP POST /api/Flights responded 400 in 5046.5160 ms
2025-07-29 01:12:38.322 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5579/api/Flights - 400 null application/json 5050.8433ms
2025-07-29 01:12:43.569 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:12:43.572 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:12:43.591 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:12:43.592 +04:00 [INF] HTTP GET /health responded 200 in 20.6376 ms
2025-07-29 01:12:43.594 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 24.5602ms
2025-07-29 01:12:52.648 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5579/api/Flights - application/json 157
2025-07-29 01:12:52.652 +04:00 [INF] Executing endpoint 'Flight.Api.Controllers.FlightsController.CreateFlight (Flight.Api)'
2025-07-29 01:12:52.653 +04:00 [INF] Route matched with {action = "CreateFlight", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateFlight(Application.Flights.Commands.CreateFlight.CreateFlightCommand, System.Threading.CancellationToken) on controller Flight.Api.Controllers.FlightsController (Flight.Api).
2025-07-29 01:12:52.655 +04:00 [INF] Executing action method Flight.Api.Controllers.FlightsController.CreateFlight (Flight.Api) - Validation state: "Valid"
2025-07-29 01:12:54.856 +04:00 [ERR] Unhandled Exception for Request CreateFlightCommand {"Origin":"string","Destination":"string","Departure":"2025-07-30T21:11:27.5960000+00:00","Arrival":"2025-07-30T21:11:27.5960000+00:00","Status":"InTime","$type":"CreateFlightCommand"}
Application.Common.Exceptions.ValidationException: One or more validation failures have occurred.
   at Application.Common.Behaviours.ValidationBehaviour`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Application\Common\Behaviours\ValidationBehaviour.cs:line 23
   at Application.Common.Behaviours.AuthorizationBehaviour`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Application\Common\Behaviours\AuthorizationBehaviour.cs:line 56
   at Application.Common.Behaviours.UnhandledExceptionBehaviour`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Application\Common\Behaviours\UnhandledExceptionBehaviour.cs:line 13
2025-07-29 01:12:54.906 +04:00 [INF] Executed action Flight.Api.Controllers.FlightsController.CreateFlight (Flight.Api) in 2251.3145ms
2025-07-29 01:12:54.907 +04:00 [INF] Executed endpoint 'Flight.Api.Controllers.FlightsController.CreateFlight (Flight.Api)'
2025-07-29 01:12:54.924 +04:00 [ERR] An unhandled exception occurred
Application.Common.Exceptions.ValidationException: One or more validation failures have occurred.
   at Application.Common.Behaviours.ValidationBehaviour`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Application\Common\Behaviours\ValidationBehaviour.cs:line 23
   at Application.Common.Behaviours.AuthorizationBehaviour`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Application\Common\Behaviours\AuthorizationBehaviour.cs:line 56
   at Application.Common.Behaviours.UnhandledExceptionBehaviour`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Application\Common\Behaviours\UnhandledExceptionBehaviour.cs:line 13
   at Flight.Api.Controllers.FlightsController.CreateFlight(CreateFlightCommand command, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Api\Controllers\FlightsController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Flight.Api.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\aleks\source\repos\Flight\Api\Middleware\GlobalExceptionMiddleware.cs:line 16
2025-07-29 01:12:54.930 +04:00 [WRN] Client error occurred: ValidationException
Application.Common.Exceptions.ValidationException: One or more validation failures have occurred.
   at Application.Common.Behaviours.ValidationBehaviour`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Application\Common\Behaviours\ValidationBehaviour.cs:line 23
   at Application.Common.Behaviours.AuthorizationBehaviour`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Application\Common\Behaviours\AuthorizationBehaviour.cs:line 56
   at Application.Common.Behaviours.UnhandledExceptionBehaviour`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Application\Common\Behaviours\UnhandledExceptionBehaviour.cs:line 13
   at Flight.Api.Controllers.FlightsController.CreateFlight(CreateFlightCommand command, CancellationToken cancellationToken) in C:\Users\aleks\source\repos\Flight\Api\Controllers\FlightsController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Flight.Api.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\aleks\source\repos\Flight\Api\Middleware\GlobalExceptionMiddleware.cs:line 16
2025-07-29 01:12:54.935 +04:00 [INF] HTTP POST /api/Flights responded 400 in 2284.5385 ms
2025-07-29 01:12:54.936 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5579/api/Flights - 400 null application/json 2288.2137ms
2025-07-29 01:13:07.374 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5579/api/Flights - application/json 157
2025-07-29 01:13:07.377 +04:00 [INF] Executing endpoint 'Flight.Api.Controllers.FlightsController.CreateFlight (Flight.Api)'
2025-07-29 01:13:07.378 +04:00 [INF] Route matched with {action = "CreateFlight", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateFlight(Application.Flights.Commands.CreateFlight.CreateFlightCommand, System.Threading.CancellationToken) on controller Flight.Api.Controllers.FlightsController (Flight.Api).
2025-07-29 01:13:07.380 +04:00 [INF] Executing action method Flight.Api.Controllers.FlightsController.CreateFlight (Flight.Api) - Validation state: "Valid"
2025-07-29 01:13:09.355 +04:00 [INF] Cache invalidated after flight creation: 0 from string to string
2025-07-29 01:13:09.438 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Flights" ("Arrival", "Departure", "Destination", "Origin", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-07-29 01:13:09.469 +04:00 [INF] Created flight 11 from string to string
2025-07-29 01:13:10.608 +04:00 [INF] Executed action method Flight.Api.Controllers.FlightsController.CreateFlight (Flight.Api), returned result Microsoft.AspNetCore.Mvc.CreatedAtActionResult in 3226.6039ms.
2025-07-29 01:13:10.610 +04:00 [INF] Executing CreatedAtActionResult, writing value of type 'Application.Flights.Queries.GetFlights.FlightResponse'.
2025-07-29 01:13:10.637 +04:00 [INF] Executed action Flight.Api.Controllers.FlightsController.CreateFlight (Flight.Api) in 3257.7386ms
2025-07-29 01:13:10.639 +04:00 [INF] Executed endpoint 'Flight.Api.Controllers.FlightsController.CreateFlight (Flight.Api)'
2025-07-29 01:13:10.640 +04:00 [INF] HTTP POST /api/Flights responded 201 in 3262.7660 ms
2025-07-29 01:13:10.641 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5579/api/Flights - 201 null application/json; charset=utf-8 3266.8475ms
2025-07-29 01:13:13.593 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:13:13.596 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:13:13.610 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:13:13.611 +04:00 [INF] HTTP GET /health responded 200 in 15.9933 ms
2025-07-29 01:13:13.614 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 20.8062ms
2025-07-29 01:13:43.614 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:13:43.616 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:13:43.633 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:13:43.634 +04:00 [INF] HTTP GET /health responded 200 in 18.1908 ms
2025-07-29 01:13:43.635 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 21.8623ms
2025-07-29 01:14:13.639 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:14:13.641 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:14:13.658 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:14:13.659 +04:00 [INF] HTTP GET /health responded 200 in 18.6057 ms
2025-07-29 01:14:13.661 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 22.2493ms
2025-07-29 01:14:43.682 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:14:43.684 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:14:43.699 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:14:43.700 +04:00 [INF] HTTP GET /health responded 200 in 15.7366 ms
2025-07-29 01:14:43.701 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 18.9799ms
2025-07-29 01:15:48.425 +04:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-07-29 01:15:50.062 +04:00 [INF] Executed DbCommand (104ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 01:15:50.109 +04:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-29 01:15:50.142 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 01:15:50.161 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 01:15:50.166 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-29 01:15:50.181 +04:00 [INF] No migrations were applied. The database is already up to date.
2025-07-29 01:15:50.572 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r
    WHERE r."Code" = 'User')
2025-07-29 01:15:50.619 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r
    WHERE r."Code" = 'Moderator')
2025-07-29 01:15:50.680 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id"
FROM "Roles" AS r
WHERE r."Code" = 'User'
LIMIT 1
2025-07-29 01:15:50.694 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id"
FROM "Roles" AS r
WHERE r."Code" = 'Moderator'
LIMIT 1
2025-07-29 01:15:51.336 +04:00 [INF] Executed DbCommand (19ms) [Parameters=[@__regularUser_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u
    WHERE u."Username" = @__regularUser_Username_0)
2025-07-29 01:15:51.344 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__moderatorUser_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u
    WHERE u."Username" = @__moderatorUser_Username_0)
2025-07-29 01:15:51.351 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__adminUser_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u
    WHERE u."Username" = @__adminUser_Username_0)
2025-07-29 01:15:51.361 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Flights" AS f)
2025-07-29 01:15:51.413 +04:00 [INF] User profile is available. Using 'C:\Users\aleks\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-29 01:15:51.843 +04:00 [INF] Now listening on: http://localhost:58088
2025-07-29 01:15:51.844 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-29 01:15:51.846 +04:00 [INF] Hosting environment: Development
2025-07-29 01:15:51.846 +04:00 [INF] Content root path: C:\Users\aleks\source\repos\Flight\Api
2025-07-29 01:15:52.827 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:15:52.876 +04:00 [WRN] Failed to determine the https port for redirect.
2025-07-29 01:15:52.940 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:15:53.177 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:15:53.184 +04:00 [INF] HTTP GET /health responded 200 in 303.4458 ms
2025-07-29 01:15:53.193 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 386.1854ms
2025-07-29 01:16:14.006 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/index.html - null null
2025-07-29 01:16:14.098 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/index.html - 200 null text/html;charset=utf-8 93.638ms
2025-07-29 01:16:14.402 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/swagger/v1/swagger.json - null null
2025-07-29 01:16:14.557 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 155.3474ms
2025-07-29 01:16:23.195 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:16:23.199 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:16:23.236 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:16:23.238 +04:00 [INF] HTTP GET /health responded 200 in 39.6885 ms
2025-07-29 01:16:23.240 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 44.3997ms
2025-07-29 01:16:31.776 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5579/api/Auth/login - application/json 54
2025-07-29 01:16:31.781 +04:00 [INF] Executing endpoint 'Flight.Api.Controllers.AuthController.Login (Flight.Api)'
2025-07-29 01:16:31.798 +04:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Application.Authentication.Commands.Login.LoginCommand, System.Threading.CancellationToken) on controller Flight.Api.Controllers.AuthController (Flight.Api).
2025-07-29 01:16:31.833 +04:00 [INF] Executing action method Flight.Api.Controllers.AuthController.Login (Flight.Api) - Validation state: "Valid"
2025-07-29 01:16:31.986 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-07-29 01:16:32.598 +04:00 [INF] User admin successfully authenticated
2025-07-29 01:16:32.613 +04:00 [WRN] Long Running Request: LoginCommand (726 milliseconds)   {"Username":"admin","Password":"password123","$type":"LoginCommand"}
2025-07-29 01:16:32.625 +04:00 [INF] Executed action method Flight.Api.Controllers.AuthController.Login (Flight.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 786.2731ms.
2025-07-29 01:16:32.638 +04:00 [INF] Executing OkObjectResult, writing value of type 'Application.Authentication.Commands.Login.LoginResponse'.
2025-07-29 01:16:32.648 +04:00 [INF] Executed action Flight.Api.Controllers.AuthController.Login (Flight.Api) in 843.4919ms
2025-07-29 01:16:32.649 +04:00 [INF] Executed endpoint 'Flight.Api.Controllers.AuthController.Login (Flight.Api)'
2025-07-29 01:16:32.650 +04:00 [INF] HTTP POST /api/Auth/login responded 200 in 870.3131 ms
2025-07-29 01:16:32.652 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5579/api/Auth/login - 200 null application/json; charset=utf-8 876.0889ms
2025-07-29 01:16:53.238 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:16:53.240 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:16:53.257 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:16:53.258 +04:00 [INF] HTTP GET /health responded 200 in 18.0472 ms
2025-07-29 01:16:53.260 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 22.2044ms
2025-07-29 01:17:23.259 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:17:23.262 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:17:23.277 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:17:23.278 +04:00 [INF] HTTP GET /health responded 200 in 16.4763 ms
2025-07-29 01:17:23.280 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 21.0619ms
2025-07-29 01:17:24.106 +04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5579/api/Flights/status - application/json 35
2025-07-29 01:17:24.163 +04:00 [INF] Executing endpoint 'Flight.Api.Controllers.FlightsController.UpdateFlightStatus (Flight.Api)'
2025-07-29 01:17:24.166 +04:00 [INF] Route matched with {action = "UpdateFlightStatus", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateFlightStatus(Application.Flights.Commands.UpdateFlightStatus.UpdateFlightStatusCommand, System.Threading.CancellationToken) on controller Flight.Api.Controllers.FlightsController (Flight.Api).
2025-07-29 01:17:24.185 +04:00 [INF] Executing action method Flight.Api.Controllers.FlightsController.UpdateFlightStatus (Flight.Api) - Validation state: "Valid"
2025-07-29 01:17:31.287 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
WHERE f."Id" = @__p_0
LIMIT 1
2025-07-29 01:17:31.516 +04:00 [INF] Executed DbCommand (122ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Flights" SET "Arrival" = @p0, "Departure" = @p1, "Destination" = @p2, "Origin" = @p3, "Status" = @p4
WHERE "Id" = @p5;
2025-07-29 01:17:31.529 +04:00 [INF] Updated flight 4 status to "InTime"
2025-07-29 01:17:31.531 +04:00 [INF] Executed action method Flight.Api.Controllers.FlightsController.UpdateFlightStatus (Flight.Api), returned result Microsoft.AspNetCore.Mvc.NoContentResult in 7344.9084ms.
2025-07-29 01:17:31.536 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-07-29 01:17:31.537 +04:00 [INF] Executed action Flight.Api.Controllers.FlightsController.UpdateFlightStatus (Flight.Api) in 7369.0087ms
2025-07-29 01:17:31.538 +04:00 [INF] Executed endpoint 'Flight.Api.Controllers.FlightsController.UpdateFlightStatus (Flight.Api)'
2025-07-29 01:17:31.540 +04:00 [INF] HTTP PUT /api/Flights/status responded 204 in 7430.7841 ms
2025-07-29 01:17:31.541 +04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5579/api/Flights/status - 204 null null 7435.5722ms
2025-07-29 01:17:53.285 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:17:53.290 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:17:53.310 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:17:53.312 +04:00 [INF] HTTP GET /health responded 200 in 21.6697 ms
2025-07-29 01:17:53.314 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 28.9461ms
2025-07-29 01:18:19.663 +04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5579/api/Flights/status - application/json 35
2025-07-29 01:18:19.667 +04:00 [INF] Executing endpoint 'Flight.Api.Controllers.FlightsController.UpdateFlightStatus (Flight.Api)'
2025-07-29 01:18:19.668 +04:00 [INF] Route matched with {action = "UpdateFlightStatus", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateFlightStatus(Application.Flights.Commands.UpdateFlightStatus.UpdateFlightStatusCommand, System.Threading.CancellationToken) on controller Flight.Api.Controllers.FlightsController (Flight.Api).
2025-07-29 01:18:19.670 +04:00 [INF] Executing action method Flight.Api.Controllers.FlightsController.UpdateFlightStatus (Flight.Api) - Validation state: "Valid"
2025-07-29 01:18:23.642 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:18:23.645 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:18:23.655 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
WHERE f."Id" = @__p_0
LIMIT 1
2025-07-29 01:18:23.662 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:18:23.663 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Flights" SET "Arrival" = @p0, "Departure" = @p1, "Destination" = @p2, "Origin" = @p3, "Status" = @p4
WHERE "Id" = @p5;
2025-07-29 01:18:23.664 +04:00 [INF] HTTP GET /health responded 200 in 19.0816 ms
2025-07-29 01:18:23.666 +04:00 [INF] Updated flight 4 status to "InTime"
2025-07-29 01:18:23.667 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 26.0411ms
2025-07-29 01:18:34.796 +04:00 [INF] Executed action method Flight.Api.Controllers.FlightsController.UpdateFlightStatus (Flight.Api), returned result Microsoft.AspNetCore.Mvc.NoContentResult in 15125.4796ms.
2025-07-29 01:18:34.808 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-07-29 01:18:34.808 +04:00 [INF] Executed action Flight.Api.Controllers.FlightsController.UpdateFlightStatus (Flight.Api) in 15139.0557ms
2025-07-29 01:18:34.810 +04:00 [INF] Executed endpoint 'Flight.Api.Controllers.FlightsController.UpdateFlightStatus (Flight.Api)'
2025-07-29 01:18:34.811 +04:00 [INF] HTTP PUT /api/Flights/status responded 204 in 15145.5660 ms
2025-07-29 01:18:34.813 +04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5579/api/Flights/status - 204 null null 15149.7968ms
2025-07-29 01:18:53.675 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:18:53.677 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:18:53.693 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:18:53.694 +04:00 [INF] HTTP GET /health responded 200 in 16.6346 ms
2025-07-29 01:18:53.695 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 20.2974ms
2025-07-29 01:19:13.226 +04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5579/api/Flights/status - application/json 36
2025-07-29 01:19:13.229 +04:00 [INF] Executing endpoint 'Flight.Api.Controllers.FlightsController.UpdateFlightStatus (Flight.Api)'
2025-07-29 01:19:13.230 +04:00 [INF] Route matched with {action = "UpdateFlightStatus", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateFlightStatus(Application.Flights.Commands.UpdateFlightStatus.UpdateFlightStatusCommand, System.Threading.CancellationToken) on controller Flight.Api.Controllers.FlightsController (Flight.Api).
2025-07-29 01:19:13.232 +04:00 [INF] Executing action method Flight.Api.Controllers.FlightsController.UpdateFlightStatus (Flight.Api) - Validation state: "Valid"
2025-07-29 01:19:15.907 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
WHERE f."Id" = @__p_0
LIMIT 1
2025-07-29 01:19:15.949 +04:00 [INF] Cache invalidated after flight status update: 4 from "InTime" to "Delayed"
2025-07-29 01:19:15.956 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Flights" SET "Arrival" = @p0, "Departure" = @p1, "Destination" = @p2, "Origin" = @p3, "Status" = @p4
WHERE "Id" = @p5;
2025-07-29 01:19:15.959 +04:00 [INF] Updated flight 4 status to "Delayed"
2025-07-29 01:19:17.365 +04:00 [INF] Executed action method Flight.Api.Controllers.FlightsController.UpdateFlightStatus (Flight.Api), returned result Microsoft.AspNetCore.Mvc.NoContentResult in 4132.0729ms.
2025-07-29 01:19:17.369 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-07-29 01:19:17.370 +04:00 [INF] Executed action Flight.Api.Controllers.FlightsController.UpdateFlightStatus (Flight.Api) in 4138.4223ms
2025-07-29 01:19:17.371 +04:00 [INF] Executed endpoint 'Flight.Api.Controllers.FlightsController.UpdateFlightStatus (Flight.Api)'
2025-07-29 01:19:17.373 +04:00 [INF] HTTP PUT /api/Flights/status responded 204 in 4144.2713 ms
2025-07-29 01:19:17.374 +04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5579/api/Flights/status - 204 null null 4148.0528ms
2025-07-29 01:19:23.695 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:19:23.697 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:19:23.713 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:19:23.714 +04:00 [INF] HTTP GET /health responded 200 in 17.3177 ms
2025-07-29 01:19:23.716 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 21.1217ms
2025-07-29 01:19:41.128 +04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5579/api/Flights/status - application/json 36
2025-07-29 01:19:41.131 +04:00 [INF] Executing endpoint 'Flight.Api.Controllers.FlightsController.UpdateFlightStatus (Flight.Api)'
2025-07-29 01:19:41.132 +04:00 [INF] Route matched with {action = "UpdateFlightStatus", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateFlightStatus(Application.Flights.Commands.UpdateFlightStatus.UpdateFlightStatusCommand, System.Threading.CancellationToken) on controller Flight.Api.Controllers.FlightsController (Flight.Api).
2025-07-29 01:19:41.133 +04:00 [INF] Executing action method Flight.Api.Controllers.FlightsController.UpdateFlightStatus (Flight.Api) - Validation state: "Valid"
2025-07-29 01:19:57.793 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:19:57.799 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
WHERE f."Id" = @__p_0
LIMIT 1
2025-07-29 01:19:57.802 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:20:35.639 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:20:35.647 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:20:35.642 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:20:35.659 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:20:35.663 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:20:35.668 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:20:35.640 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Flights" SET "Arrival" = @p0, "Departure" = @p1, "Destination" = @p2, "Origin" = @p3, "Status" = @p4
WHERE "Id" = @p5;
2025-07-29 01:20:35.710 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:20:35.710 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:20:35.711 +04:00 [INF] Updated flight 4 status to "Delayed"
2025-07-29 01:20:36.542 +04:00 [WRN] Long Running Request: UpdateFlightStatusCommand (52571 milliseconds) 3  {"Id":4,"Status":"Delayed","$type":"UpdateFlightStatusCommand"}
2025-07-29 01:20:36.559 +04:00 [ERR] An unhandled exception occurred
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.CheckHealthAsync(Func`2 predicate, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.HealthChecks.HealthCheckMiddleware.InvokeAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Flight.Api.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\aleks\source\repos\Flight\Api\Middleware\GlobalExceptionMiddleware.cs:line 16
2025-07-29 01:20:36.562 +04:00 [ERR] Health check npgsql with status "Unhealthy" completed after 59.0209ms with message 'A task was canceled.'
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync[TResult](Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at HealthChecks.NpgSql.NpgSqlHealthCheck.CheckHealthAsync(HealthCheckContext context, CancellationToken cancellationToken) in /home/runner/work/AspNetCore.Diagnostics.HealthChecks/AspNetCore.Diagnostics.HealthChecks/src/HealthChecks.NpgSql/NpgSqlHealthCheck.cs:line 31
   at HealthChecks.NpgSql.NpgSqlHealthCheck.CheckHealthAsync(HealthCheckContext context, CancellationToken cancellationToken) in /home/runner/work/AspNetCore.Diagnostics.HealthChecks/AspNetCore.Diagnostics.HealthChecks/src/HealthChecks.NpgSql/NpgSqlHealthCheck.cs:line 37
2025-07-29 01:20:38.865 +04:00 [ERR] Server error occurred: TaskCanceledException
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.CheckHealthAsync(Func`2 predicate, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.HealthChecks.HealthCheckMiddleware.InvokeAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Flight.Api.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\aleks\source\repos\Flight\Api\Middleware\GlobalExceptionMiddleware.cs:line 16
2025-07-29 01:20:36.559 +04:00 [ERR] An unhandled exception occurred
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.CheckHealthAsync(Func`2 predicate, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.HealthChecks.HealthCheckMiddleware.InvokeAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Flight.Api.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\aleks\source\repos\Flight\Api\Middleware\GlobalExceptionMiddleware.cs:line 16
2025-07-29 01:20:38.858 +04:00 [INF] Executed action method Flight.Api.Controllers.FlightsController.UpdateFlightStatus (Flight.Api), returned result Microsoft.AspNetCore.Mvc.NoContentResult in 57723.395ms.
2025-07-29 01:20:36.562 +04:00 [ERR] Health check ApplicationDbContext with status "Unhealthy" completed after 88.2143ms with message 'null'
2025-07-29 01:20:38.858 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:20:38.876 +04:00 [ERR] Server error occurred: TaskCanceledException
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.CheckHealthAsync(Func`2 predicate, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.HealthChecks.HealthCheckMiddleware.InvokeAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Flight.Api.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\aleks\source\repos\Flight\Api\Middleware\GlobalExceptionMiddleware.cs:line 16
2025-07-29 01:20:38.877 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-07-29 01:20:38.879 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:20:38.879 +04:00 [INF] HTTP GET /health responded 200 in 3216.4635 ms
2025-07-29 01:20:38.882 +04:00 [INF] Executed action Flight.Api.Controllers.FlightsController.UpdateFlightStatus (Flight.Api) in 57748.9664ms
2025-07-29 01:20:38.898 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 3250.8419ms
2025-07-29 01:20:38.928 +04:00 [ERR] An unhandled exception occurred
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.CheckHealthAsync(Func`2 predicate, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.HealthChecks.HealthCheckMiddleware.InvokeAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Flight.Api.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\aleks\source\repos\Flight\Api\Middleware\GlobalExceptionMiddleware.cs:line 16
2025-07-29 01:20:38.929 +04:00 [INF] Executed endpoint 'Flight.Api.Controllers.FlightsController.UpdateFlightStatus (Flight.Api)'
2025-07-29 01:20:38.933 +04:00 [ERR] HTTP GET /health responded 500 in 3265.1838 ms
2025-07-29 01:20:38.933 +04:00 [ERR] HTTP GET /health responded 500 in 3276.4784 ms
2025-07-29 01:20:38.933 +04:00 [ERR] Server error occurred: TaskCanceledException
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.CheckHealthAsync(Func`2 predicate, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.HealthChecks.HealthCheckMiddleware.InvokeAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Flight.Api.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\aleks\source\repos\Flight\Api\Middleware\GlobalExceptionMiddleware.cs:line 16
2025-07-29 01:20:38.934 +04:00 [INF] HTTP PUT /api/Flights/status responded 204 in 57803.3434 ms
2025-07-29 01:20:38.935 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 500 null application/json 3293.232ms
2025-07-29 01:20:38.937 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 500 null application/json 3298.2899ms
2025-07-29 01:20:38.939 +04:00 [ERR] HTTP GET /health responded 500 in 41136.9518 ms
2025-07-29 01:20:38.940 +04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5579/api/Flights/status - 204 null null 57811.8168ms
2025-07-29 01:20:38.946 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 500 null application/json 41153.3834ms
2025-07-29 01:20:51.967 +04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5579/api/Flights/status - application/json 35
2025-07-29 01:20:51.971 +04:00 [INF] Executing endpoint 'Flight.Api.Controllers.FlightsController.UpdateFlightStatus (Flight.Api)'
2025-07-29 01:20:51.971 +04:00 [INF] Route matched with {action = "UpdateFlightStatus", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateFlightStatus(Application.Flights.Commands.UpdateFlightStatus.UpdateFlightStatusCommand, System.Threading.CancellationToken) on controller Flight.Api.Controllers.FlightsController (Flight.Api).
2025-07-29 01:20:51.973 +04:00 [INF] Executing action method Flight.Api.Controllers.FlightsController.UpdateFlightStatus (Flight.Api) - Validation state: "Valid"
2025-07-29 01:20:55.474 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
WHERE f."Id" = @__p_0
LIMIT 1
2025-07-29 01:20:57.417 +04:00 [INF] Cache invalidated after flight status update: 4 from "Delayed" to "InTime"
2025-07-29 01:20:57.422 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Flights" SET "Arrival" = @p0, "Departure" = @p1, "Destination" = @p2, "Origin" = @p3, "Status" = @p4
WHERE "Id" = @p5;
2025-07-29 01:20:57.425 +04:00 [INF] Updated flight 4 status to "InTime"
2025-07-29 01:20:58.090 +04:00 [WRN] Long Running Request: UpdateFlightStatusCommand (3486 milliseconds) 3  {"Id":4,"Status":"InTime","$type":"UpdateFlightStatusCommand"}
2025-07-29 01:20:58.820 +04:00 [INF] Executed action method Flight.Api.Controllers.FlightsController.UpdateFlightStatus (Flight.Api), returned result Microsoft.AspNetCore.Mvc.NoContentResult in 6845.6919ms.
2025-07-29 01:20:58.824 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-07-29 01:20:58.825 +04:00 [INF] Executed action Flight.Api.Controllers.FlightsController.UpdateFlightStatus (Flight.Api) in 6851.839ms
2025-07-29 01:20:58.826 +04:00 [INF] Executed endpoint 'Flight.Api.Controllers.FlightsController.UpdateFlightStatus (Flight.Api)'
2025-07-29 01:20:58.827 +04:00 [INF] HTTP PUT /api/Flights/status responded 204 in 6856.5754 ms
2025-07-29 01:20:58.828 +04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5579/api/Flights/status - 204 null null 6860.8626ms
2025-07-29 01:21:08.874 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5579/health - null null
2025-07-29 01:21:08.876 +04:00 [INF] Executing endpoint 'Health checks'
2025-07-29 01:21:08.892 +04:00 [INF] Executed endpoint 'Health checks'
2025-07-29 01:21:08.893 +04:00 [INF] HTTP GET /health responded 200 in 17.2761 ms
2025-07-29 01:21:08.895 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5579/health - 200 null text/plain 21.5632ms
2025-07-29 01:21:14.787 +04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5579/api/Flights/status - application/json 36
2025-07-29 01:21:14.790 +04:00 [INF] Executing endpoint 'Flight.Api.Controllers.FlightsController.UpdateFlightStatus (Flight.Api)'
2025-07-29 01:21:14.791 +04:00 [INF] Route matched with {action = "UpdateFlightStatus", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateFlightStatus(Application.Flights.Commands.UpdateFlightStatus.UpdateFlightStatusCommand, System.Threading.CancellationToken) on controller Flight.Api.Controllers.FlightsController (Flight.Api).
2025-07-29 01:21:14.803 +04:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-07-29 01:21:14.820 +04:00 [INF] Executed action Flight.Api.Controllers.FlightsController.UpdateFlightStatus (Flight.Api) in 27.4257ms
2025-07-29 01:21:14.821 +04:00 [INF] Executed endpoint 'Flight.Api.Controllers.FlightsController.UpdateFlightStatus (Flight.Api)'
2025-07-29 01:21:14.822 +04:00 [INF] HTTP PUT /api/Flights/status responded 400 in 32.5009 ms
2025-07-29 01:21:14.824 +04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5579/api/Flights/status - 400 null application/problem+json; charset=utf-8 36.7999ms
